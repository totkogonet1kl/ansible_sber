# Тестовое задание на вакансию DevOps.
----

### Данный проект является решением тестового задания на вакансию DevOps'а, которым поделился со мной мой товарищ, когда пробовался устроится в один крупный и известный банк нашей страны.

----

## Задание 

Даны три машины: 
  *А* - машина, которая выполняет функцию Ansible-мастер и отсылает команды другим.
  *В* и *С* - две машины, которые выступают в качестве серверов.

Задачи:
1. На "*В*" отключить авторизацию по паролю.
2. На "*В*" добавить пользователя <b>*DevOps*</b>, настроить авторизацию по ключам и предоставить ему доступ "*sudo*" без пароля.
3. На "*В*" установить PostgreSQL, создать БД <b>*myapp*</b> и <b>*myauth*</b>. Добавить пользователя <b>*developer*</b> и дать доступ к БД: <b>*myapp*</b> - на запись и чтение, <b>*myauth*</b> - на чтение.
4. Настроить доступ пользователя <b>*developer*</b> только с сервера "*С*".
5. Проверка выполнения запроса с сервера "*С*" к PostgresSQL под <b>*developer*</b>.
6. На "*В*" и "*С*" можно зайти только с "*А*". При этом PostrgesSQL доступен только "*С*".

<b>НА МАШИНЫ "В" И "С" ДО ВЫПОЛНЕНИЯ ВСЕХ ЗАДАЧ КАТЕГОРИЧЕСКИ НЕЛЬЗЯ ЗАХОДИТЬ, ВЫПОЛНИТЬ ИСКЛЮЧИТЕЛЬНО ЧЕРЕЗ ANSIBLE!!!

----

## Инструменты и софт
Для решения задания использовались три виртуальные машины с установленным на них дистрибутивом "Ubuntu-live-Server-22.04.3":
 1. ub22serv - мастер-сервер (А). ip_address = 192.168.25.132
 2. b22ubu - сервер (В). ip_address = 192.168.25.133
 3. c22ubu - сервер (С). ip_address = 192.168.25.134

На мастер-сервере установлен Ansible версии 2.10.8 и Python версии 3.10.12. Все файлы и команды отдаютя от дефолтного пользователя созданного при установке.

На серверах "В" и "С" установлен Python 3.10.12 и создан пользователь "ansible" с правами sudo, через которого ansible будет подключатся к серверу.

----
## Конфигурация Ansible

В домашней директории нашего пользователя создадим папку "ansible_test_example":

```bash
mkdir ansible_test_example
```

Для упрощения пользования Ansible'ом создадим конигурационный файл в созданной ранее папке, из которого утилита автоматически будет подтягивать нужные нам парамтры для её работы:

```bash
cd ansible_test_example && nano ansible.cfg
```

В открывшемся текстовом редакторе прописываем:
```
[defaults]
host_key_checking = false
inventory = hosts.ini
```

